# WooCommerce ç¶ ç•Œåˆ†æœŸä»˜æ¬¾æ§åˆ¶

[![GitHub](https://img.shields.io/badge/GitHub-TTSoong-blue?logo=github)](https://github.com/TTSoong/ecpay-installment-control)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![WordPress](https://img.shields.io/badge/WordPress-5.0%2B-blue.svg)](https://wordpress.org/)
[![WooCommerce](https://img.shields.io/badge/WooCommerce-3.0%2B-purple.svg)](https://woocommerce.com/)

> å°ˆç‚º WordPress + WooCommerce è¨­è¨ˆçš„ç¶ ç•Œé‡‘æµåˆ†æœŸä»˜æ¬¾ç²¾ç´°æ§åˆ¶ç³»çµ±

## ğŸ¯ å°ˆæ¡ˆæ¦‚è¿°

é€™æ˜¯ä¸€å€‹å°ˆç‚º WooCommerce ç¶ ç•Œé‡‘æµè¨­è¨ˆçš„åˆ†æœŸä»˜æ¬¾æ§åˆ¶å¤–æ›ã€‚**æ ¸å¿ƒåŠŸèƒ½**æ˜¯å¯¦ç¾ç²¾ç´°æ§åˆ¶ï¼šåªéš±è—åˆ†æœŸé¸é …è€Œä¿ç•™ä¸€èˆ¬ä¿¡ç”¨å¡ä»˜æ¬¾ï¼Œç¢ºä¿åªæœ‰ç•¶è³¼ç‰©è»Šä¸­æ‰€æœ‰å•†å“éƒ½å…è¨±åˆ†æœŸæ™‚æ‰é¡¯ç¤ºåˆ†æœŸä»˜æ¬¾é¸é …ã€‚

### ğŸ’¡ è§£æ±ºçš„å•é¡Œ

- âŒ **èˆŠæ–¹å¼**ï¼šç²—æš´éš±è—æ•´å€‹ç¶ ç•Œæ”¯ä»˜
- âœ… **æ–°æ–¹å¼**ï¼šç²¾ç¢ºéš±è—åˆ†æœŸé¸é …ï¼Œä¿ç•™ä¸€èˆ¬ä¿¡ç”¨å¡

## âœ¨ æ ¸å¿ƒç‰¹è‰²

- **ğŸ¯ ç²¾ç´°æ§åˆ¶**ï¼šåªéš±è—åˆ†æœŸé¸é …ï¼Œä¿ç•™ä¸€èˆ¬ä¿¡ç”¨å¡ä»˜æ¬¾
- **ğŸ”’ åš´æ ¼æ§åˆ¶**ï¼šè³¼ç‰©è»Šä¸­æ‰€æœ‰å•†å“éƒ½å¿…é ˆæœ‰åˆ†æœŸæ¨™ç±¤æ‰é¡¯ç¤ºåˆ†æœŸé¸é …
- **ğŸ›ï¸ æ™ºèƒ½è¨­å®šç²¾éˆ**ï¼šé¦–æ¬¡å•Ÿç”¨è‡ªå‹•å¼•å°è¨­å®š
- **âš™ï¸ é›™é‡æ§åˆ¶æ¨¡å¼**ï¼šéš±è—æ‰€æœ‰åˆ†æœŸ / é¸æ“‡æ€§é¡¯ç¤ºåˆ†æœŸæœŸæ•¸
- **ğŸ“¦ æ‰¹æ¬¡æ“ä½œ**ï¼šå¯æ‰¹æ¬¡ç‚ºå•†å“æ·»åŠ æˆ–ç§»é™¤åˆ†æœŸæ¨™ç±¤
- **ğŸš€ é«˜æ•ˆèƒ½**ï¼šå„ªåŒ–çš„ JavaScriptï¼Œæ¸›å°‘å®¢æˆ¶ç«¯è³‡æºæ¶ˆè€—
- **ğŸ” å®Œæ•´é™¤éŒ¯**ï¼šå…§å»ºé™¤éŒ¯å·¥å…·å’Œæ—¥èªŒç³»çµ±

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- WordPress 5.0+
- WooCommerce 3.0+
- ç¶ ç•Œé‡‘æµå¤–æ›ï¼ˆECPayï¼‰
- PHP 7.0+

## ğŸš€ å¿«é€Ÿé–‹å§‹

### 1. ä¸‹è¼‰å®‰è£

```bash
# æ–¹æ³•ä¸€ï¼šå…‹éš†æ•´å€‹å°ˆæ¡ˆ
git clone https://github.com/TTSoong/ecpay-installment-control.git
cd ecpay-installment-control
cp -r ecpay-installment-control/ /path/to/wordpress/wp-content/plugins/

# æ–¹æ³•äºŒï¼šç›´æ¥ä¸‹è¼‰å¤–æ›è³‡æ–™å¤¾
# ä¸‹è¼‰ ZIP å¾Œï¼Œå°‡ ecpay-installment-control/ è³‡æ–™å¤¾ä¸Šå‚³åˆ°ï¼š
/wp-content/plugins/ecpay-installment-control/
```

### 2. å•Ÿç”¨å¤–æ›

1. å‰å¾€ WordPress å¾Œå°ã€Œå¤–æ›ã€é é¢
2. æ‰¾åˆ°ã€ŒWooCommerce ç¶ ç•Œåˆ†æœŸä»˜æ¬¾æ§åˆ¶ã€
3. é»æ“Šã€Œå•Ÿç”¨ã€
4. è·Ÿéš¨è‡ªå‹•é¡¯ç¤ºçš„è¨­å®šç²¾éˆ

### 3. ä½¿ç”¨è¨­å®šç²¾éˆ

é¦–æ¬¡å•Ÿç”¨å¾Œï¼Œç³»çµ±æœƒè‡ªå‹•é¡¯ç¤ºè¨­å®šç²¾éˆï¼š

1. **ç³»çµ±æª¢æŸ¥**ï¼šæª¢æŸ¥ WordPressã€WooCommerceã€ç¶ ç•Œå¤–æ›
2. **åµæ¸¬ä»˜æ¬¾æ–¹å¼**ï¼šè‡ªå‹•è­˜åˆ¥ç¶ ç•Œåˆ†æœŸä»˜æ¬¾é¸é …
3. **åŠŸèƒ½è¨­å®š**ï¼šé¸æ“‡æ§åˆ¶æ¨¡å¼å’Œåˆ†æœŸæœŸæ•¸
4. **å®Œæˆè¨­å®š**ï¼šé–‹å§‹ä½¿ç”¨åˆ†æœŸæ§åˆ¶åŠŸèƒ½

## ğŸ›ï¸ æ§åˆ¶æ¨¡å¼

### æ¨¡å¼ 1ï¼šéš±è—æ‰€æœ‰åˆ†æœŸé¸é …ï¼ˆé è¨­ï¼‰

```
ç¶ ç•Œæ”¯ä»˜é¸é …ï¼š
âœ… ä¿¡ç”¨å¡(ä¸€æ¬¡ä»˜æ¸…)
âŒ ä¿¡ç”¨å¡(ä¸‰æœŸ)     â† éš±è—
âŒ ä¿¡ç”¨å¡(å…­æœŸ)     â† éš±è—
âŒ ä¿¡ç”¨å¡(åäºŒæœŸ)   â† éš±è—
âœ… WebATM
âœ… ATM
```

### æ¨¡å¼ 2ï¼šé¸æ“‡æ€§é¡¯ç¤ºåˆ†æœŸæœŸæ•¸

```
å‡è¨­åªå…è¨± 3 æœŸå’Œ 6 æœŸï¼š
âœ… ä¿¡ç”¨å¡(ä¸€æ¬¡ä»˜æ¸…)
âœ… ä¿¡ç”¨å¡(ä¸‰æœŸ)     â† å…è¨±
âœ… ä¿¡ç”¨å¡(å…­æœŸ)     â† å…è¨±
âŒ ä¿¡ç”¨å¡(åäºŒæœŸ)   â† éš±è—
âŒ ä¿¡ç”¨å¡(åå…«æœŸ)   â† éš±è—
```

## ğŸ“ æª”æ¡ˆçµæ§‹

```
.
â”œâ”€â”€ README.md                                  # å°ˆæ¡ˆèªªæ˜æ–‡ä»¶
â””â”€â”€ ecpay-installment-control/                 # WordPress å¤–æ›è³‡æ–™å¤¾
    â”œâ”€â”€ ecpay-installment-control.php          # ä¸»å¤–æ›æª”æ¡ˆ
    â”œâ”€â”€ includes/
    â”‚   â”œâ”€â”€ class-installment-controller.php   # æ ¸å¿ƒæ§åˆ¶é‚è¼¯
    â”‚   â”œâ”€â”€ class-product-manager.php          # å•†å“ç®¡ç†
    â”‚   â””â”€â”€ class-system-checker.php           # ç³»çµ±æª¢æ¸¬
    â”œâ”€â”€ admin/
    â”‚   â”œâ”€â”€ class-admin.php                    # ç®¡ç†ä»‹é¢
    â”‚   â””â”€â”€ class-setup-wizard.php             # è¨­å®šç²¾éˆ
    â”œâ”€â”€ public/
    â”‚   â””â”€â”€ class-frontend.php                 # å‰å°åŠŸèƒ½
    â”œâ”€â”€ test-debug.php                         # ç³»çµ±é™¤éŒ¯å·¥å…·
    â””â”€â”€ backup-essential-only.php              # å®‰è£å‰å‚™ä»½è…³æœ¬
```

## ğŸ”§ ä½¿ç”¨æ–¹å¼

### è¨­å®šå•†å“åˆ†æœŸæ¬Šé™

**æ–¹æ³• 1ï¼šå•†å“ç·¨è¼¯é é¢**
1. å‰å¾€ã€Œå•†å“ã€â†’ã€Œç·¨è¼¯å•†å“ã€
2. åœ¨ã€Œä¸€èˆ¬ã€æ¨™ç±¤é å‹¾é¸ã€Œå…è¨±åˆ†æœŸä»˜æ¬¾ã€
3. å„²å­˜å•†å“

**æ–¹æ³• 2ï¼šæ‰¹æ¬¡æ“ä½œ**
1. å‰å¾€ WooCommerce â†’ åˆ†æœŸä»˜æ¬¾æ§åˆ¶
2. ä½¿ç”¨æ‰¹æ¬¡å•Ÿç”¨/åœç”¨åŠŸèƒ½

### ç®¡ç†å¤–æ›è¨­å®š

åœ¨å¤–æ›é é¢å¯ä»¥çœ‹åˆ°å…©å€‹æŒ‰éˆ•ï¼š
- **è¨­å®š**ï¼šé€²å…¥ç®¡ç†ä»‹é¢
- **è¨­å®šç²¾éˆ**ï¼šé‡æ–°åŸ·è¡Œåˆå§‹è¨­å®š

## ğŸ”„ å¤–æ›æ›´æ–°

### æ›´æ–°æ–¹å¼
1. **ç›´æ¥è¦†è“‹**ï¼šä¸‹è¼‰æ–°ç‰ˆæœ¬å¾Œç›´æ¥è¦†è“‹èˆŠæª”æ¡ˆå³å¯
2. **ä¿ç•™è¨­å®š**ï¼šæ‰€æœ‰è¨­å®šå’Œå•†å“åˆ†æœŸæ¨™ç±¤éƒ½æœƒè‡ªå‹•ä¿ç•™
3. **ç„¡éœ€é‡æ–°è¨­å®š**ï¼šæ›´æ–°å¾Œæœƒè‡ªå‹•ä¿ç•™æ‚¨çš„æ‰€æœ‰é…ç½®

### é‡æ–°åŸ·è¡Œè¨­å®šç²¾éˆ
å¦‚æœéœ€è¦é‡æ–°è¨­å®šå¤–æ›ï¼š
1. å‰å¾€ã€Œå¤–æ›ã€é é¢
2. æ‰¾åˆ°ã€ŒWooCommerce ç¶ ç•Œåˆ†æœŸä»˜æ¬¾æ§åˆ¶ã€
3. é»æ“Šã€Œè¨­å®šç²¾éˆã€æŒ‰éˆ•
4. é‡æ–°è·Ÿéš¨è¨­å®šæµç¨‹

## ğŸ› ï¸ å…§å»ºå·¥å…·

### ğŸ“‹ ç³»çµ±é™¤éŒ¯å·¥å…· (`test-debug.php`)

**ç”¨é€”**ï¼šè¨ºæ–·ç³»çµ±ç‹€æ…‹å’Œé…ç½®å•é¡Œ

**ä½¿ç”¨æ–¹æ³•**ï¼š
```
http://yoursite.com/wp-content/plugins/ecpay-installment-control/test-debug.php
```

**åŠŸèƒ½**ï¼š
- âœ… æª¢æŸ¥å¤–æ›å•Ÿç”¨ç‹€æ…‹
- âœ… åµæ¸¬ç¶ ç•Œå¤–æ›å’Œä»˜æ¬¾æ–¹å¼
- âœ… é©—è­‰è³¼ç‰©è»Šå•†å“åˆ†æœŸè¨­å®š
- âœ… é¡¯ç¤º JavaScript æ—¥èªŒç‹€æ…‹
- âœ… æä¾›å¿«é€Ÿæ“ä½œé€£çµ

**æ³¨æ„**ï¼šéœ€è¦ç®¡ç†å“¡æ¬Šé™æ‰èƒ½è¨ªå•ï¼Œä½¿ç”¨å®Œç•¢å¯åˆªé™¤æ­¤æª”æ¡ˆã€‚

### ğŸ’¾ å®‰è£å‰å‚™ä»½è…³æœ¬ (`backup-essential-only.php`)

**ç”¨é€”**ï¼šå®‰è£å¤–æ›å‰å‰µå»ºè¼•é‡åŒ–ç¶²ç«™å‚™ä»½

**ä½¿ç”¨æ–¹æ³•**ï¼š
```bash
# å¾å¤–æ›è³‡æ–™å¤¾è¤‡è£½åˆ° WordPress æ ¹ç›®éŒ„å¾ŒåŸ·è¡Œ
cp ecpay-installment-control/backup-essential-only.php ./
php backup-essential-only.php
```

**å‚™ä»½ç¯„åœ**ï¼š
- âœ… æ ¸å¿ƒè¨­å®šæª”æ¡ˆ (wp-config.php, .htaccess)
- âœ… ä¸»é¡Œ PHP/CSS/JS æª”æ¡ˆ (æ’é™¤åœ–ç‰‡)
- âœ… é‡è¦å¤–æ›æª”æ¡ˆ (WooCommerce, ECPay ç›¸é—œ)
- âœ… å®Œæ•´è³‡æ–™åº« (æ’é™¤å¤§å‹æ—¥èªŒè¡¨)

**æ’é™¤å…§å®¹**ï¼š
- âŒ åœ–ç‰‡æª”æ¡ˆ (jpg, png, gif, webp ç­‰)
- âŒ å½±ç‰‡æª”æ¡ˆ (mp4, mov, avi ç­‰)
- âŒ é–‹ç™¼æª”æ¡ˆ (node_modules, .git ç­‰)

**å‚™ä»½å¤§å°**ï¼šç›¸æ¯”å®Œæ•´å‚™ä»½å¯æ¸›å°‘ 70-90% çš„æª”æ¡ˆå¤§å°

### ğŸ” é™¤éŒ¯åŠŸèƒ½

**è©³ç´°æ—¥èªŒæ¨¡å¼**ï¼š
åœ¨çµå¸³é é¢ç¶²å€å¾ŒåŠ ä¸Š `?ecpay_debug=1` å•Ÿç”¨è©³ç´°æ—¥èªŒã€‚

**JavaScript æ§åˆ¶å°**ï¼š
æŒ‰ F12 æŸ¥çœ‹æ§åˆ¶å°æ—¥èªŒï¼š
```
ECPay: å·²éš±è— X å€‹åˆ†æœŸé¸é …
```

## ğŸš¨ ç–‘é›£æ’è§£

### Q: åˆ†æœŸé¸é …ä»ç„¶é¡¯ç¤ºï¼Ÿ
**A:** 
1. æª¢æŸ¥å•†å“æ˜¯å¦æœ‰åˆ†æœŸæ¨™ç±¤
2. ç¢ºèªæ§åˆ¶æ¨¡å¼è¨­å®š
3. å•Ÿç”¨é™¤éŒ¯æ¨¡å¼æŸ¥çœ‹æ—¥èªŒ

### Q: å•†å“æ¨™ç±¤è¨­å®šç„¡æ•ˆï¼Ÿ
**A:** æ¸…é™¤æ‰€æœ‰å¿«å–ï¼Œç¢ºèªå•†å“æ­£ç¢ºå„²å­˜ã€‚

### Q: å¤–æ›æ›´æ–°å¾Œè¨­å®šä¸è¦‹äº†ï¼Ÿ
**A:** å¤–æ›æœ‰è‡ªå‹•ä¿ç•™è¨­å®šåŠŸèƒ½ï¼Œå¦‚æœ‰å•é¡Œè«‹æª¢æŸ¥è³‡æ–™åº«ä¸­çš„ `ecpay_installment_control_options` é¸é …ã€‚

## ğŸ› ï¸ é–‹ç™¼è€…è³‡è¨Š

### è‡ªå®šç¾©åˆ†æœŸè¦å‰‡ç¯„ä¾‹

```php
// åƒ¹æ ¼é–€æª»æ§åˆ¶
if ($product->get_price() < 5000) {
    return false; // åƒ¹æ ¼ä½æ–¼ 5000 ä¸å…è¨±åˆ†æœŸ
}

// å•†å“åˆ†é¡æ§åˆ¶
$categories = wp_get_post_terms($product_id, 'product_cat', array('fields' => 'slugs'));
if (in_array('electronics', $categories)) {
    return true; // é›»å­ç”¢å“å…è¨±åˆ†æœŸ
}

// æœƒå“¡ç­‰ç´šæ§åˆ¶
if (user_can(get_current_user_id(), 'vip_member')) {
    return true; // VIP æœƒå“¡å…è¨±åˆ†æœŸ
}
```

### é‰¤å­å’Œéæ¿¾å™¨

```php
// è‡ªå®šç¾©åˆ†æœŸæª¢æŸ¥é‚è¼¯
add_filter('ecpay_installment_product_check', function($allowed, $product_id) {
    // æ‚¨çš„è‡ªå®šç¾©é‚è¼¯
    return $allowed;
}, 10, 2);
```

## ğŸ“ˆ ç‰ˆæœ¬æ­·å²

- **v1.0.0** (2025-09-28)
  - åˆå§‹ç‰ˆæœ¬ç™¼å¸ƒ
  - ç²¾ç´°æ§åˆ¶åˆ†æœŸé¸é …
  - æ™ºèƒ½è¨­å®šç²¾éˆ
  - æ•ˆèƒ½å„ªåŒ–

## ğŸ¤ è²¢ç»

æ­¡è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork å°ˆæ¡ˆ
2. å‰µå»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤è®Šæ›´ (`git commit -m 'Add some AmazingFeature'`)
4. Push åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. é–‹å•Ÿ Pull Request

## ğŸ“„ æˆæ¬Š

æ­¤å°ˆæ¡ˆæ¡ç”¨ [MIT æˆæ¬Š](LICENSE)ã€‚

## ğŸ‘¨â€ğŸ’» ä½œè€…

**TTSoong** - [GitHub Profile](https://github.com/TTSoong)

## ğŸ”— ç›¸é—œé€£çµ

- [å°ˆæ¡ˆé¦–é ](https://github.com/TTSoong/ecpay-installment-control)
- [Issue å›å ±](https://github.com/TTSoong/ecpay-installment-control/issues)
- [ä½œè€… GitHub](https://github.com/TTSoong)

---

**è®“åˆ†æœŸä»˜æ¬¾æ§åˆ¶è®Šå¾—ç°¡å–®è€Œç²¾ç¢ºï¼** ğŸ‰
